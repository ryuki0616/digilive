<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- メタデータ設定 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="activity_logsテーブルの詳細情報 - デジタライブ・アドベンチャー">
    <meta name="keywords" content="activity_logs, 活動ログ, データベース, テーブル">
    <meta name="author" content="Digital Live Adventure Team">
    
    <!-- ページタイトル -->
    <title>activity_logs テーブル | ディジタライブ・アドベンチャー</title>
    
    <!-- 外部スタイルシート -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="table-styles.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- メインコンテナ -->
    <div class="container">
        <!-- ヘッダーセクション -->
        <header class="page-header">
            <div class="header-top">
                <a href="database.html" class="back-button">
                    <span class="back-icon">←</span>
                    <span class="back-text">データベース一覧</span>
                </a>
                <h1>📈 activity_logs テーブル</h1>
                <div class="header-actions">
                    <a href="index.html" class="home-button">
                        <span class="home-icon">🏠</span>
                        <span class="home-text">ホーム</span>
                    </a>
                </div>
            </div>
            <p class="page-subtitle">参加者の活動履歴とステータス変動記録</p>
        </header>

        <!-- テーブル概要セクション -->
        <section class="table-overview">
            <div class="overview-card">
                <div class="card-header">
                    <div class="table-icon">📈</div>
                    <div class="table-info">
                        <h2>activity_logs</h2>
                        <p>参加者の活動履歴とステータス変動を記録するログテーブル</p>
                    </div>
                </div>
                <div class="table-stats">
                    <div class="stat-item">
                        <span class="stat-label">フィールド数</span>
                        <span class="stat-value">10</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">主キー</span>
                        <span class="stat-value">log_id</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">外部キー</span>
                        <span class="stat-value">2個</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- テーブル構造セクション -->
        <section class="table-structure">
            <h2>📋 テーブル構造</h2>
            <div class="structure-content">
                <div class="field-list">
                    <div class="field-item primary-key">
                        <div class="field-info">
                            <span class="field-name">log_id</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint pk">PRIMARY KEY</span>
                            <span class="constraint auto">AUTO_INCREMENT</span>
                        </div>
                        <div class="field-description">ログを一意に識別するID</div>
                    </div>

                    <div class="field-item foreign-key">
                        <div class="field-info">
                            <span class="field-name">participant_id</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint fk">FOREIGN KEY</span>
                            <span class="constraint not-null">NOT NULL</span>
                        </div>
                        <div class="field-description">参加者ID（participantsテーブル参照）</div>
                    </div>

                    <div class="field-item foreign-key">
                        <div class="field-info">
                            <span class="field-name">booth_id</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint fk">FOREIGN KEY</span>
                            <span class="constraint not-null">NOT NULL</span>
                        </div>
                        <div class="field-description">ブースID（boothsテーブル参照）</div>
                    </div>

                    <div class="field-item change-field">
                        <div class="field-info">
                            <span class="field-name">money_change</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint default">DEFAULT 0</span>
                        </div>
                        <div class="field-description">所持金の変動量（正の値：獲得、負の値：消費）</div>
                    </div>

                    <div class="field-item change-field">
                        <div class="field-info">
                            <span class="field-name">power_change</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint default">DEFAULT 0</span>
                        </div>
                        <div class="field-description">パワーの変動量</div>
                    </div>

                    <div class="field-item change-field">
                        <div class="field-info">
                            <span class="field-name">stamina_change</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint default">DEFAULT 0</span>
                        </div>
                        <div class="field-description">スタミナの変動量</div>
                    </div>

                    <div class="field-item change-field">
                        <div class="field-info">
                            <span class="field-name">speed_change</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint default">DEFAULT 0</span>
                        </div>
                        <div class="field-description">スピードの変動量</div>
                    </div>

                    <div class="field-item change-field">
                        <div class="field-info">
                            <span class="field-name">technique_change</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint default">DEFAULT 0</span>
                        </div>
                        <div class="field-description">テクニックの変動量</div>
                    </div>

                    <div class="field-item change-field">
                        <div class="field-info">
                            <span class="field-name">luck_change</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint default">DEFAULT 0</span>
                        </div>
                        <div class="field-description">ラックの変動量</div>
                    </div>

                    <div class="field-item timestamp">
                        <div class="field-info">
                            <span class="field-name">created_at</span>
                            <span class="field-type">DATETIME</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint default">DEFAULT CURRENT_TIMESTAMP</span>
                        </div>
                        <div class="field-description">活動記録日時</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ステータス変動セクション -->
        <section class="status-changes">
            <h2>📊 ステータス変動の仕組み</h2>
            <div class="changes-content">
                <div class="change-type positive">
                    <div class="change-header">
                        <span class="change-icon">📈</span>
                        <h3>ステータス上昇</h3>
                    </div>
                    <div class="change-description">
                        <p>ゲームブースでの活動により、各ステータスが上昇します</p>
                        <ul>
                            <li><strong>パワーチャージ・ステーション</strong>: パワー +5, スタミナ +3</li>
                            <li><strong>リアクション・スプリンター</strong>: スピード +4, テクニック +2</li>
                            <li><strong>トレジャー・ハント</strong>: テクニック +6</li>
                            <li><strong>バーチャル・ランナー</strong>: スタミナ +5, スピード +3</li>
                            <li><strong>ミラクル・タッチ</strong>: ランダムなステータス上昇</li>
                        </ul>
                    </div>
                </div>

                <div class="change-type negative">
                    <div class="change-header">
                        <span class="change-icon">📉</span>
                        <h3>所持金消費</h3>
                    </div>
                    <div class="change-description">
                        <p>ショップブースでのアイテム購入により、所持金が消費されます</p>
                        <ul>
                            <li><strong>パワーアップアイテム</strong>: 所持金 -100, パワー +10</li>
                            <li><strong>スタミナ回復アイテム</strong>: 所持金 -80, スタミナ +8</li>
                            <li><strong>スピードブーストアイテム</strong>: 所持金 -120, スピード +12</li>
                            <li><strong>テクニック向上アイテム</strong>: 所持金 -90, テクニック +9</li>
                            <li><strong>ラックアップアイテム</strong>: 所持金 -150, ラック +15</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- テーブル関係セクション -->
        <section class="table-relationships">
            <h2>🔗 テーブル関係</h2>
            <div class="relationships-content">
                <div class="relationship-card">
                    <div class="relationship-header">
                        <span class="relationship-type">多対1</span>
                        <span class="relationship-direction">←</span>
                    </div>
                    <div class="relationship-details">
                        <div class="related-table">
                            <span class="table-icon">👥</span>
                            <span class="table-name">participants</span>
                        </div>
                        <div class="relationship-description">
                            複数の活動ログが1人の参加者に属する
                        </div>
                    </div>
                </div>

                <div class="relationship-card">
                    <div class="relationship-header">
                        <span class="relationship-type">多対1</span>
                        <span class="relationship-direction">←</span>
                    </div>
                    <div class="relationship-details">
                        <div class="related-table">
                            <span class="table-icon">🎮</span>
                            <span class="table-name">booths</span>
                        </div>
                        <div class="relationship-description">
                            複数の活動ログが1つのブースに属する
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 使用例セクション -->
        <section class="usage-examples">
            <h2>💡 使用例</h2>
            <div class="examples-content">
                <div class="example-card">
                    <h3>活動ログ記録</h3>
                    <div class="sql-example">
                        <pre><code>INSERT INTO activity_logs 
(participant_id, booth_id, power_change, stamina_change, money_change) 
VALUES (1, 1, 5, 3, 50);</code></pre>
                    </div>
                </div>

                <div class="example-card">
                    <h3>参加者の活動履歴</h3>
                    <div class="sql-example">
                        <pre><code>SELECT al.*, p.nickname, b.booth_name 
FROM activity_logs al
JOIN participants p ON al.participant_id = p.participant_id
JOIN booths b ON al.booth_id = b.booth_id
WHERE al.participant_id = 1
ORDER BY al.created_at DESC;</code></pre>
                    </div>
                </div>

                <div class="example-card">
                    <h3>ブース別活動統計</h3>
                    <div class="sql-example">
                        <pre><code>SELECT b.booth_name, COUNT(*) as activity_count,
       AVG(al.power_change) as avg_power_change
FROM activity_logs al
JOIN booths b ON al.booth_id = b.booth_id
GROUP BY b.booth_id, b.booth_name;</code></pre>
                    </div>
                </div>

                <div class="example-card">
                    <h3>ステータス変動合計</h3>
                    <div class="sql-example">
                        <pre><code>SELECT participant_id,
       SUM(power_change) as total_power,
       SUM(stamina_change) as total_stamina,
       SUM(money_change) as total_money
FROM activity_logs
GROUP BY participant_id;</code></pre>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <!-- JavaScriptファイル -->
    <script src="script.js"></script>
    <script src="table-script.js"></script>
</body>
</html>
