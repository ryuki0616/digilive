/* ========================================
   ãƒ‡ã‚£ã‚¸ã‚¿ãƒ©ã‚¤ãƒ–ãƒ»ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼ JavaScript
   ======================================== */

/**
 * DOMè¦ç´ ã®å–å¾—
 * ç¾åœ¨ã¯contentBoxãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€å°†æ¥ã®æ©Ÿèƒ½æ‹¡å¼µç”¨ã«ä¿æŒ
 */
const contentBox = document.getElementById('content');

/**
 * ãƒ‡ã‚£ã‚¸ã‚¿ãƒ©ã‚¤ãƒ–ãƒ»ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼ç”¨ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…åˆ—
 * å°†æ¥çš„ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ãŒè¿½åŠ ã•ã‚ŒãŸéš›ã«ä½¿ç”¨
 */
const adventureMessages = [
    "ãƒ‡ã‚¸ã‚¿ãƒ«ã¨ãƒªã‚¢ãƒ«ã‚’èåˆã—ãŸæ–°ã—ã„ä½“é¨“ãŒå§‹ã¾ã‚Šã¾ã™ï¼",
    "ä½“ã‚’å‹•ã‹ã—ã¦ã€ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚’æ¢ç´¢ã—ã‚ˆã†ï¼",
    "ARæŠ€è¡“ã§ç¾å®Ÿä¸–ç•ŒãŒã‚²ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å¤‰ã‚ã‚Šã¾ã™ï¼",
    "å‹é”ã¨ä¸€ç·’ã«å†’é™ºã®æ—…ã«å‡ºã‹ã‘ã¾ã—ã‚‡ã†ï¼",
    "æ–°ã—ã„ç™ºè¦‹ãŒã‚ãªãŸã‚’å¾…ã£ã¦ã„ã¾ã™ï¼ğŸŒŸ"
];

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆé…åˆ—ã®ç¾åœ¨ä½ç½®ã‚’ç®¡ç†ï¼‰
let messageIndex = 0;

/* ========================================
   ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
   ======================================== */

/**
 * DOMèª­ã¿è¾¼ã¿å®Œäº†æ™‚ã®å‡¦ç†
 * è¦ç´ ã‚’é †ç•ªã«ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§è¡¨ç¤º
 */
document.addEventListener('DOMContentLoaded', function() {
    // ã‚³ãƒ³ãƒ†ãƒŠå†…ã®å…¨è¦ç´ ã‚’å–å¾—
    const elements = document.querySelectorAll('.container > *');
    
    // å„è¦ç´ ã«å¯¾ã—ã¦é †æ¬¡ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨
    elements.forEach((element, index) => {
        // åˆæœŸçŠ¶æ…‹ï¼šé€æ˜ã§ä¸‹ã«ãšã‚‰ã™
        element.style.opacity = '0';
        element.style.transform = 'translateY(30px)';
        
        // é…å»¶ã‚’è¨­ã‘ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
        setTimeout(() => {
            element.style.transition = 'all 0.6s ease-out';
            element.style.opacity = '1';
            element.style.transform = 'translateY(0)';
        }, index * 200);  // 200msé–“éš”ã§é †æ¬¡è¡¨ç¤º
    });
});

/* ========================================
   ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
   ======================================== */

/**
 * ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†
 * @param {KeyboardEvent} event - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆ
 */
document.addEventListener('keydown', function(event) {
    switch(event.key.toLowerCase()) {  // å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„
        case 'm':
            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¤‰æ›´æ©Ÿèƒ½ï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒœãƒƒã‚¯ã‚¹ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿ï¼‰
            if (contentBox) {
                messageIndex = (messageIndex + 1) % adventureMessages.length;
                
                // ã‚¹ã‚±ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                contentBox.style.transform = 'scale(0.95)';
                contentBox.style.opacity = '0.7';
                
                // 150mså¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ›´æ–°ã—ã¦ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—
                setTimeout(() => {
                    contentBox.innerHTML = `<p>${adventureMessages[messageIndex]}</p>`;
                    contentBox.style.transform = 'scale(1)';
                    contentBox.style.opacity = '1';
                }, 150);
            }
            break;
            
        case 'r':
            // ãƒšãƒ¼ã‚¸ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½
            location.reload();
            break;
            
        default:
            // ãã®ä»–ã®ã‚­ãƒ¼ã¯ä½•ã‚‚ã—ãªã„
            break;
    }
});

/* ========================================
   ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–åŠ¹æœ
   ======================================== */

/**
 * ãƒã‚¦ã‚¹ç§»å‹•ã«ã‚ˆã‚‹è¦–å·®åŠ¹æœ
 * ãƒã‚¦ã‚¹ã®ä½ç½®ã«å¿œã˜ã¦èƒŒæ™¯ã®ä½ç½®ã‚’å¾®å¦™ã«å¤‰åŒ–ã•ã›ã‚‹
 * @param {MouseEvent} event - ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆ
 */
document.addEventListener('mousemove', function(event) {
    // ãƒã‚¦ã‚¹ä½ç½®ã‚’0-1ã®ç¯„å›²ã§æ­£è¦åŒ–
    const x = event.clientX / window.innerWidth;
    const y = event.clientY / window.innerHeight;
    
    // èƒŒæ™¯ä½ç½®ã‚’ãƒã‚¦ã‚¹ä½ç½®ã«å¿œã˜ã¦èª¿æ•´ï¼ˆè¦–å·®åŠ¹æœï¼‰
    document.body.style.backgroundPosition = `${x * 50}% ${y * 50}%`;
});

/* ========================================
   ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒ­ã‚°å‡ºåŠ›
   ======================================== */

/**
 * ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
 * é–‹ç™ºè€…å‘ã‘ã®æƒ…å ±ã¨ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®èª¬æ˜
 */
console.log('ğŸš€ ãƒ‡ã‚£ã‚¸ã‚¿ãƒ©ã‚¤ãƒ–ãƒ»ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸï¼');
console.log('ğŸ’¡ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ:');
console.log('   M - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¤‰æ›´ï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ãŒå­˜åœ¨ã™ã‚‹å ´åˆï¼‰');
console.log('   R - ãƒªã‚»ãƒƒãƒˆ');

/* ========================================
   ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
   ======================================== */

/**
 * ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã®å‡¦ç†
 * ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã¨ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®å‡ºåŠ›
 */
window.addEventListener('load', function() {
    console.log('âš¡ ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ã¾ã—ãŸï¼');
    
    // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±ã®å‡ºåŠ›ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
    if (window.performance && window.performance.timing) {
        const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
        console.log(`ğŸ“Š èª­ã¿è¾¼ã¿æ™‚é–“: ${loadTime}ms`);
    }
});
