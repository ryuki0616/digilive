# 要件定義書

## 1. はじめに

[cite_start]本要件定義書は、子供向け参加型イベント「デジタライブ・アドベンチャー」のシステム開発における要件を定義するものです [cite: 80][cite_start]。NFCカード技術を活用し、子供たちが身体を動かしながらゲーム感覚で楽しめるイベントの実現を目指します [cite: 80]。

## 2. 機能要件

### 2.1. [cite_start]参加者管理機能 [cite: 82]

- [cite_start]受付システムは、NFCカードと参加者情報を紐づけて登録できること [cite: 83]。
- [cite_start]参加者情報は、以下の項目を管理できること [cite: 84]。
  - [cite_start]参加者ID（NFCカードID） [cite: 85]
  - [cite_start]氏名（ニックネーム可） [cite: 86]
  - [cite_start]年齢 [cite: 87]
  - [cite_start]現在のステータス（パワー、スタミナ、スピード、テクニック、ラック、**所持金**） [cite: 88, 185]
  - [cite_start]各ブースの体験履歴 [cite: 89]
- [cite_start]参加者登録時に、初期ステータスを設定できること [cite: 90]。
- **（データ設計）**
  - [cite_start]参加者名はNFCカードに最大 **20バイト**（日本語6文字相当）まで保存する [cite: 183]。
  - [cite_start]各ステータス（所持金含む）は最大 `65,535` （2バイト）とし、1ページ（4バイト）に2ステータス分を格納する [cite: 185, 186]。

### 2.2. [cite_start]ステータス更新機能 [cite: 91]

- [cite_start]各ブースに設置されたNFCリーダー/ライターは、参加者のNFCカードから現在のステータスを読み取れること [cite: 92]。
- [cite_start]各ブースの体験結果に応じて、NFCカードにリアルタイムでステータスを書き込めること [cite: 93]。
- [cite_start]ステータス更新は、以下のブース試作案に基づいて行われること [cite: 94]。
  - [cite_start]パワーチャージ・ステーション: ボタン連打の結果に応じてパワー、スタミナを更新 [cite: 95]。
  - [cite_start]リアクション・スプリンター: モグラ叩き風ゲームの結果に応じてスピード、テクニックを更新 [cite: 96]。
  - [cite_start]トレジャー・ハント: 記憶力ゲームの結果に応じてテクニックを更新 [cite: 97]。
  - [cite_start]バーチャル・ランナー: その場足踏みの結果に応じてスタミナ、スピードを更新 [cite: 98]。
  - [cite_start]ミラクル・タッチ: 運試しによりランダムにラックを含むステータスを更新 [cite: 99]。

### 2.3. [cite_start]ランキング表示機能 [cite: 100]

- [cite_start]総合ランキング、ステータス別（パワー、スタミナ、スピード、テクニック、ラック）ランキング、**所持金ランキング**をリアルタイムで生成できること [cite: 101, 185]。
- [cite_start]生成されたランキングは、会場内の大型モニターに表示できること [cite: 102]。
- [cite_start]管理者用PCから、リアルタイムでランキングを確認できること [cite: 103]。
- [cite_start]ランキング表示は、参加者のステータス合計値、各ステータス値、所持金額に基づいて行われること [cite: 104]。

### 2.4. [cite_start]データ保存機能 [cite: 105]

- [cite_start]イベント中の全参加者データ（登録情報、ステータス履歴、ブース体験履歴など）をサーバーに記録・保存できること [cite: 106]。
- [cite_start]保存されたデータは、イベント終了後に分析や報告に利用できる形式であること [cite: 107]。

## 3. 非機能要件

### 3.1. [cite_start]信頼性 [cite: 109]

- [cite_start]イベント開催中にシステムが停止することなく、安定して稼働できること [cite: 110]。
- [cite_start]NFCカードの読み書きエラーが発生した場合でも、適切なエラーハンドリングが行われること [cite: 111]。

### 3.2. [cite_start]使いやすさ(UX) [cite: 112]

- [cite_start]子供が直感的に操作できるシンプルなインターフェースを提供すること [cite: 113]。
- [cite_start]各ブースの操作は、視覚的・聴覚的に分かりやすいフィードバックを提供すること [cite: 114]。
- [cite_start]管理者用インターフェースは、操作が容易で、必要な情報に素早くアクセスできること [cite: 115]。

### 3.3. [cite_start]拡張性 [cite: 116]

- [cite_start]将来的に新しいブースやステータスを容易に追加できるシステム構成であること [cite: 117]。
- [cite_start]参加者数の増加にも対応できるスケーラビリティを有すること [cite: 118]。

### 3.4. [cite_start]安全性 [cite: 119]

- [cite_start]機材の設置や配線は、子供たちの安全に最大限配慮した設計とすること [cite: 120]。
- [cite_start]個人情報の取り扱いについては、適切なセキュリティ対策を講じること [cite: 121]。

## 4. システム要件

### 4.1. [cite_start]ハードウェア要件 [cite: 123]

- [cite_start]**NFCカード**: ISO/IEC 14443 Type A (NTAG215相当 / NFC Forum Type 2) を使用すること [cite: 124, 37]。
- [cite_start]**NFCリーダー/ライター**: ACR122Uまたは同等品を使用すること [cite: 125]。
- [cite_start]**ブース制御用マイコン**: Raspberry Pi 4 Model B (メモリ4GB以上) を使用すること [cite: 126]。
- [cite_start]**サーバー用PC**: Intel N150, メモリ16GB, SSD 512GB以上を推奨（学校設備利用） [cite: 127]。
- [cite_start]**大型モニター**: 55インチ以上を推奨（学校設備利用） [cite: 128]。
- [cite_start]**管理者用PC**: イベントのスコア表示・管理用に利用（ユーザー自身のPCを利用） [cite: 129]。

### 4.2. [cite_start]ソフトウェア要件 

- [cite_start]**NFCカード管理アプリケーション (受付システム)**[cite: 131]:
  - [cite_start]**(Electronにて開発)** 
  - [cite_start]参加者登録、NFCカードへの初期データ書き込み機能 [cite: 132]。
  - [cite_start]参加者情報の閲覧、編集機能 [cite: 133]。
- [cite_start]**ブース連携プログラム**[cite: 134]:
  - [cite_start]**(Python (pyscard) にて開発)** 
  - [cite_start]各ブースのセンサーからの入力データ取得機能 [cite: 135]。
  - [cite_start]NFCリーダー/ライターとの連携によるステータス読み書き機能 [cite: 136]。
  - [cite_start]サーバーとのデータ連携機能 [cite: 137]。
- **連携方式:**
  - [cite_start]受付システムのUI (Electron) とNFC制御 (Python) は、`child_process`（子プロセス呼び出し）およびIPC（プロセス間通信）を用いて連携する 。
- [cite_start]**総合管理・表示アプリケーション**[cite: 138]:
  - [cite_start]リアルタイムランキング表示機能（大型モニター用） [cite: 139]。
  - [cite_start]管理者用PCでのランキング、参加者データ閲覧機能 [cite: 140]。
  - [cite_start]データ分析、レポート出力機能（オプション） [cite: 141]。

### 4.3. [cite_start]ネットワーク要件 

- [cite_start]**接続方式**: VPNを利用してサーバーに接続できること [cite: 143]。
- [cite_start]**環境**: 学校内の有線LANまたはWi-Fi環境を利用できること [cite: 144]。
- [cite_start]**サーバーOS**: Ubuntu Server 24.04.3 [cite: 145]。
- **サーバー接続**:
  - 内部接続: `ssh -p 22222 [ユーザー名]@[内部IPアドレス]` **[機密情報のためマスク]**
  - 外部接続（VPN）: `ssh -p 22222 [ユーザー名]@[VPNIPアドレス]` **[機密情報のためマスク]**

## 5. 予算と前提条件

### 5.1. [cite_start]予算 [cite: 148]

- [cite_start]新規ハードウェア予算: 約15万円 (参加者100名、5ブースの場合) [cite: 149]。

### 5.2. [cite_start]前提条件 [cite: 150]

- [cite_start]サーバーPC、大型モニター、ネットワーク環境は学校の既存設備を利用すること [cite: 151]。
- [cite_start]ソフトウェア開発費、ブースのセンサー・装飾費、景品代は別途必要となること [cite: 152]。