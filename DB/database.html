<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- メタデータ設定 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="デジタライブ・アドベンチャーのデータベース構造を視覚的に表示">
    <meta name="keywords" content="データベース, ER図, テーブル設計, デジタライブ">
    <meta name="author" content="Digital Live Adventure Team">
    
    <!-- ページタイトル -->
    <title>データベース表示 | ディジタライブ・アドベンチャー</title>
    
    <!-- 外部スタイルシート -->
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="database-styles.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- サイドバー -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>🗄️ テーブル一覧</h3>
            <button class="sidebar-toggle" id="sidebarToggle">
                <span class="toggle-icon">×</span>
            </button>
        </div>
        
        <nav class="sidebar-nav">
            <ul class="table-list">
                <li class="table-item active" data-table="participants">
                    <div class="table-icon">👥</div>
                    <div class="table-info">
                        <div class="table-name">participants</div>
                        <div class="table-desc">参加者管理</div>
                    </div>
                    <div class="table-stats">
                        <span class="field-count">12</span>
                    </div>
                </li>
                
                <li class="table-item" data-table="booths">
                    <div class="table-icon">🎮</div>
                    <div class="table-info">
                        <div class="table-name">booths</div>
                        <div class="table-desc">ブース管理</div>
                    </div>
                    <div class="table-stats">
                        <span class="field-count">4</span>
                    </div>
                </li>
                
                <li class="table-item" data-table="activity_logs">
                    <div class="table-icon">📈</div>
                    <div class="table-info">
                        <div class="table-name">activity_logs</div>
                        <div class="table-desc">活動ログ</div>
                    </div>
                    <div class="table-stats">
                        <span class="field-count">10</span>
                    </div>
                </li>
                
                <li class="table-item" data-table="shop_items">
                    <div class="table-icon">🛍️</div>
                    <div class="table-info">
                        <div class="table-name">shop_items</div>
                        <div class="table-desc">ショップアイテム</div>
                    </div>
                    <div class="table-stats">
                        <span class="field-count">6</span>
                    </div>
                </li>
                
                <li class="table-item" data-table="purchase_logs">
                    <div class="table-icon">🛒</div>
                    <div class="table-info">
                        <div class="table-name">purchase_logs</div>
                        <div class="table-desc">購入ログ</div>
                    </div>
                    <div class="table-stats">
                        <span class="field-count">6</span>
                    </div>
                </li>
            </ul>
        </nav>
        
        <div class="sidebar-footer">
            <div class="database-info">
                <div class="info-item">
                    <span class="info-label">テーブル数:</span>
                    <span class="info-value">5</span>
                </div>
                <div class="info-item">
                    <span class="info-label">総フィールド数:</span>
                    <span class="info-value">38</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- メインコンテナ -->
    <div class="container">
        <!-- ヘッダーセクション -->
        <header class="page-header">
            <div class="header-top">
                <button class="sidebar-open-btn" id="sidebarOpenBtn">
                    <span class="menu-icon">☰</span>
                    <span class="menu-text">テーブル一覧</span>
                </button>
                <h1>🗄️ データベース構造</h1>
                <a href="../index.html" class="back-button">
                    <span class="back-icon">←</span>
                    <span class="back-text">ホームに戻る</span>
                </a>
            </div>
            <p class="page-subtitle">デジタライブ・アドベンチャーのデータベース設計</p>
        </header>

        <!-- データベース概要セクション -->
        <section class="database-overview">
            <h2>📊 データベース概要</h2>
            <div class="overview-cards">
                <a href="table-participants.html" class="overview-card-link">
                    <div class="overview-card">
                        <div class="card-icon">👥</div>
                        <div class="card-content">
                            <h3>participants</h3>
                            <p>参加者情報とステータス管理</p>
                            <div class="card-stats">
                                <span class="field-count">12フィールド</span>
                                <span class="table-type">メインテーブル</span>
                            </div>
                        </div>
                        <div class="card-arrow">→</div>
                    </div>
                </a>
                
                <a href="table-booths.html" class="overview-card-link">
                    <div class="overview-card">
                        <div class="card-icon">🎮</div>
                        <div class="card-content">
                            <h3>booths</h3>
                            <p>ブース情報管理</p>
                            <div class="card-stats">
                                <span class="field-count">4フィールド</span>
                                <span class="table-type">マスターテーブル</span>
                            </div>
                        </div>
                        <div class="card-arrow">→</div>
                    </div>
                </a>
                
                <a href="table-activity-logs.html" class="overview-card-link">
                    <div class="overview-card">
                        <div class="card-icon">📈</div>
                        <div class="card-content">
                            <h3>activity_logs</h3>
                            <p>活動履歴とステータス変動</p>
                            <div class="card-stats">
                                <span class="field-count">10フィールド</span>
                                <span class="table-type">ログテーブル</span>
                            </div>
                        </div>
                        <div class="card-arrow">→</div>
                    </div>
                </a>
                
                <a href="table-shop-items.html" class="overview-card-link">
                    <div class="overview-card">
                        <div class="card-icon">🛍️</div>
                        <div class="card-content">
                            <h3>shop_items</h3>
                            <p>ショップアイテム管理</p>
                            <div class="card-stats">
                                <span class="field-count">6フィールド</span>
                                <span class="table-type">マスターテーブル</span>
                            </div>
                        </div>
                        <div class="card-arrow">→</div>
                    </div>
                </a>
                
                <a href="table-purchase-logs.html" class="overview-card-link">
                    <div class="overview-card">
                        <div class="card-icon">🛒</div>
                        <div class="card-content">
                            <h3>purchase_logs</h3>
                            <p>購入履歴管理</p>
                            <div class="card-stats">
                                <span class="field-count">6フィールド</span>
                                <span class="table-type">ログテーブル</span>
                            </div>
                        </div>
                        <div class="card-arrow">→</div>
                    </div>
                </a>
            </div>
        </section>

        <!-- ER図表示セクション -->
        <section class="er-diagram-section">
            <h2>🔗 エンティティ関係図 (ER Diagram)</h2>
            <div class="diagram-container">
                <div class="er-diagram" id="erDiagram">
                    <!-- ER図はJavaScriptで動的に生成 -->
                </div>
            </div>
        </section>

        <!-- テーブル詳細セクション -->
        <section class="table-details">
            <h2>📋 テーブル詳細</h2>
            <div class="table-tabs">
                <button class="tab-button active" data-table="participants">参加者</button>
                <button class="tab-button" data-table="booths">ブース</button>
                <button class="tab-button" data-table="activity_logs">活動ログ</button>
                <button class="tab-button" data-table="shop_items">ショップアイテム</button>
                <button class="tab-button" data-table="purchase_logs">購入ログ</button>
            </div>
            
            <div class="table-content">
                <div class="loading-message" style="padding: 2rem; text-align: center; color: #666;">
                    <p>📊 データベース情報を読み込み中...</p>
                    <p style="font-size: 0.9rem;">JavaScriptが有効になっているか確認してください。</p>
                </div>
            </div>
        </section>

        <!-- データフローセクション -->
        <section class="data-flow">
            <h2>🔄 データフロー</h2>
            <div class="flow-container">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>参加者登録</h3>
                        <p>NFCカードと参加者情報を紐づけ</p>
                    </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>ブース体験</h3>
                        <p>ゲームでステータスと所持金を獲得</p>
                    </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>ショップ利用</h3>
                        <p>所持金でアイテムを購入</p>
                    </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>ランキング生成</h3>
                        <p>リアルタイムでランキングを表示</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 統計情報セクション -->
        <section class="statistics">
            <h2>📊 データベース統計</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalTables">5</div>
                    <div class="stat-label">テーブル数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalFields">25</div>
                    <div class="stat-label">フィールド数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalRelations">4</div>
                    <div class="stat-label">関係数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalIndexes">8</div>
                    <div class="stat-label">インデックス数</div>
                </div>
            </div>
        </section>
    </div>
    
    <!-- JavaScriptファイル -->
    <script src="database-script.js"></script>
</body>
</html>
