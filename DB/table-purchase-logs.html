<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- 繝｡繧ｿ繝・・繧ｿ險ｭ螳・-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="purchase_logs繝・・繝悶Ν縺ｮ隧ｳ邏ｰ諠・ｱ - 繝・ず繧ｿ繝ｩ繧､繝悶・繧｢繝峨・繝ｳ繝√Ε繝ｼ">
    <meta name="keywords" content="purchase_logs, 雉ｼ蜈･繝ｭ繧ｰ, 繝・・繧ｿ繝吶・繧ｹ, 繝・・繝悶Ν">
    <meta name="author" content="Digital Live Adventure Team">
    
    <!-- 繝壹・繧ｸ繧ｿ繧､繝医Ν -->
    <title>purchase_logs 繝・・繝悶Ν | 繝・ぅ繧ｸ繧ｿ繝ｩ繧､繝悶・繧｢繝峨・繝ｳ繝√Ε繝ｼ</title>
    
    <!-- 螟夜Κ繧ｹ繧ｿ繧､繝ｫ繧ｷ繝ｼ繝・-->
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="table-styles.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 繝｡繧､繝ｳ繧ｳ繝ｳ繝・リ -->
    <div class="container">
        <!-- 繝倥ャ繝繝ｼ繧ｻ繧ｯ繧ｷ繝ｧ繝ｳ -->
        <header class="page-header">
            <div class="header-top">
                <a href="database.html" class="back-button">
                    <span class="back-icon">竊・/span>
                    <span class="back-text">繝・・繧ｿ繝吶・繧ｹ荳隕ｧ</span>
                </a>
                <h1>將 purchase_logs 繝・・繝悶Ν</h1>
                <div class="header-actions">
                    <a href="../index.html" class="home-button">
                        <span class="home-icon">匠</span>
                        <span class="home-text">繝帙・繝</span>
                    </a>
                </div>
            </div>
            <p class="page-subtitle">繧ｷ繝ｧ繝・・縺ｧ縺ｮ雉ｼ蜈･螻･豁ｴ邂｡逅・/p>
        </header>

        <!-- 繝・・繝悶Ν讎りｦ√そ繧ｯ繧ｷ繝ｧ繝ｳ -->
        <section class="table-overview">
            <div class="overview-card">
                <div class="card-header">
                    <div class="table-icon">將</div>
                    <div class="table-info">
                        <h2>purchase_logs</h2>
                        <p>繧ｷ繝ｧ繝・・縺ｧ縺ｮ繧｢繧､繝・Β雉ｼ蜈･螻･豁ｴ繧定ｨ倬鹸縺吶ｋ繝ｭ繧ｰ繝・・繝悶Ν</p>
                    </div>
                </div>
                <div class="table-stats">
                    <div class="stat-item">
                        <span class="stat-label">繝輔ぅ繝ｼ繝ｫ繝画焚</span>
                        <span class="stat-value">6</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">荳ｻ繧ｭ繝ｼ</span>
                        <span class="stat-value">purchase_id</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">螟夜Κ繧ｭ繝ｼ</span>
                        <span class="stat-value">2蛟・/span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 繝・・繝悶Ν讒矩繧ｻ繧ｯ繧ｷ繝ｧ繝ｳ -->
        <section class="table-structure">
            <h2>搭 繝・・繝悶Ν讒矩</h2>
            <div class="structure-content">
                <div class="field-list">
                    <div class="field-item primary-key">
                        <div class="field-info">
                            <span class="field-name">purchase_id</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint pk">PRIMARY KEY</span>
                            <span class="constraint auto">AUTO_INCREMENT</span>
                        </div>
                        <div class="field-description">雉ｼ蜈･險倬鹸繧剃ｸ諢上↓隴伜挨縺吶ｋID</div>
                    </div>

                    <div class="field-item foreign-key">
                        <div class="field-info">
                            <span class="field-name">participant_id</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint fk">FOREIGN KEY</span>
                            <span class="constraint not-null">NOT NULL</span>
                        </div>
                        <div class="field-description">雉ｼ蜈･閠・D・・articipants繝・・繝悶Ν蜿ら・・・/div>
                    </div>

                    <div class="field-item foreign-key">
                        <div class="field-info">
                            <span class="field-name">item_id</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint fk">FOREIGN KEY</span>
                            <span class="constraint not-null">NOT NULL</span>
                        </div>
                        <div class="field-description">雉ｼ蜈･繧｢繧､繝・ΒID・・hop_items繝・・繝悶Ν蜿ら・・・/div>
                    </div>

                    <div class="field-item quantity">
                        <div class="field-info">
                            <span class="field-name">quantity</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint default">DEFAULT 1</span>
                        </div>
                        <div class="field-description">雉ｼ蜈･謨ｰ驥擾ｼ郁､・焚雉ｼ蜈･蟇ｾ蠢懶ｼ・/div>
                    </div>

                    <div class="field-item required">
                        <div class="field-info">
                            <span class="field-name">total_price</span>
                            <span class="field-type">INT</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint not-null">NOT NULL</span>
                        </div>
                        <div class="field-description">蜷郁ｨ井ｾ｡譬ｼ・亥腰萓｡ ﾃ・謨ｰ驥擾ｼ・/div>
                    </div>

                    <div class="field-item timestamp">
                        <div class="field-info">
                            <span class="field-name">created_at</span>
                            <span class="field-type">DATETIME</span>
                        </div>
                        <div class="field-constraints">
                            <span class="constraint default">DEFAULT CURRENT_TIMESTAMP</span>
                        </div>
                        <div class="field-description">雉ｼ蜈･譌･譎・/div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 雉ｼ蜈･繝輔Ο繝ｼ繧ｻ繧ｯ繧ｷ繝ｧ繝ｳ -->
        <section class="purchase-flow">
            <h2>売 雉ｼ蜈･繝輔Ο繝ｼ</h2>
            <div class="flow-content">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>繧ｷ繝ｧ繝・・繝悶・繧ｹ險ｪ蝠・/h3>
                        <p>蜿ょ刈閠・′繧ｷ繝ｧ繝・・繝悶・繧ｹ縺ｫNFC繧ｫ繝ｼ繝峨ｒ縺九＊縺・/p>
                    </div>
                </div>
                
                <div class="flow-arrow">竊・/div>
                
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>繧｢繧､繝・Β驕ｸ謚・/h3>
                        <p>蛻ｩ逕ｨ蜿ｯ閭ｽ縺ｪ繧｢繧､繝・Β縺九ｉ雉ｼ蜈･縺励◆縺・い繧､繝・Β繧帝∈謚・/p>
                    </div>
                </div>
                
                <div class="flow-arrow">竊・/div>
                
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>謇謖・≡遒ｺ隱・/h3>
                        <p>蜿ょ刈閠・・謇謖・≡縺後い繧､繝・Β萓｡譬ｼ莉･荳翫°繝√ぉ繝・け</p>
                    </div>
                </div>
                
                <div class="flow-arrow">竊・/div>
                
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>雉ｼ蜈･蜃ｦ逅・/h3>
                        <p>謇謖・≡繧呈ｸ帷ｮ励＠縲√せ繝・・繧ｿ繧ｹ繧剃ｸ頑・縺輔○繧・/p>
                    </div>
                </div>
                
                <div class="flow-arrow">竊・/div>
                
                <div class="flow-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h3>繝ｭ繧ｰ險倬鹸</h3>
                        <p>purchase_logs繝・・繝悶Ν縺ｫ雉ｼ蜈･螻･豁ｴ繧定ｨ倬鹸</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 繝・・繝悶Ν髢｢菫ゅそ繧ｯ繧ｷ繝ｧ繝ｳ -->
        <section class="table-relationships">
            <h2>迫 繝・・繝悶Ν髢｢菫・/h2>
            <div class="relationships-content">
                <div class="relationship-card">
                    <div class="relationship-header">
                        <span class="relationship-type">螟壼ｯｾ1</span>
                        <span class="relationship-direction">竊・/span>
                    </div>
                    <div class="relationship-details">
                        <div class="related-table">
                            <span class="table-icon">則</span>
                            <span class="table-name">participants</span>
                        </div>
                        <div class="relationship-description">
                            隍・焚縺ｮ雉ｼ蜈･險倬鹸縺・莠ｺ縺ｮ蜿ょ刈閠・↓螻槭☆繧・
                        </div>
                    </div>
                </div>

                <div class="relationship-card">
                    <div class="relationship-header">
                        <span class="relationship-type">螟壼ｯｾ1</span>
                        <span class="relationship-direction">竊・/span>
                    </div>
                    <div class="relationship-details">
                        <div class="related-table">
                            <span class="table-icon">寫・・/span>
                            <span class="table-name">shop_items</span>
                        </div>
                        <div class="relationship-description">
                            隍・焚縺ｮ雉ｼ蜈･險倬鹸縺・縺､縺ｮ繧｢繧､繝・Β縺ｫ螻槭☆繧・
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 菴ｿ逕ｨ萓九そ繧ｯ繧ｷ繝ｧ繝ｳ -->
        <section class="usage-examples">
            <h2>庁 菴ｿ逕ｨ萓・/h2>
            <div class="examples-content">
                <div class="example-card">
                    <h3>雉ｼ蜈･險倬鹸</h3>
                    <div class="sql-example">
                        <pre><code>INSERT INTO purchase_logs 
(participant_id, item_id, quantity, total_price) 
VALUES (1, 3, 2, 200);</code></pre>
                    </div>
                </div>

                <div class="example-card">
                    <h3>蜿ょ刈閠・・雉ｼ蜈･螻･豁ｴ</h3>
                    <div class="sql-example">
                        <pre><code>SELECT pl.*, p.nickname, si.item_name, si.effect_type
FROM purchase_logs pl
JOIN participants p ON pl.participant_id = p.participant_id
JOIN shop_items si ON pl.item_id = si.item_id
WHERE pl.participant_id = 1
ORDER BY pl.created_at DESC;</code></pre>
                    </div>
                </div>

                <div class="example-card">
                    <h3>莠ｺ豌励い繧､繝・Β繝ｩ繝ｳ繧ｭ繝ｳ繧ｰ</h3>
                    <div class="sql-example">
                        <pre><code>SELECT si.item_name, 
       COUNT(*) as purchase_count,
       SUM(pl.quantity) as total_quantity,
       SUM(pl.total_price) as total_revenue
FROM purchase_logs pl
JOIN shop_items si ON pl.item_id = si.item_id
GROUP BY si.item_id, si.item_name
ORDER BY purchase_count DESC;</code></pre>
                    </div>
                </div>

                <div class="example-card">
                    <h3>蜿ょ刈閠・挨雉ｼ蜈･邨ｱ險・/h3>
                    <div class="sql-example">
                        <pre><code>SELECT p.nickname,
       COUNT(*) as purchase_count,
       SUM(pl.total_price) as total_spent,
       AVG(pl.total_price) as avg_purchase
FROM purchase_logs pl
JOIN participants p ON pl.participant_id = p.participant_id
GROUP BY p.participant_id, p.nickname
ORDER BY total_spent DESC;</code></pre>
                    </div>
                </div>

                <div class="example-card">
                    <h3>譎る俣蛻･雉ｼ蜈･蛻・梵</h3>
                    <div class="sql-example">
                        <pre><code>SELECT DATE(created_at) as purchase_date,
       HOUR(created_at) as purchase_hour,
       COUNT(*) as purchase_count,
       SUM(total_price) as total_revenue
FROM purchase_logs
GROUP BY DATE(created_at), HOUR(created_at)
ORDER BY purchase_date, purchase_hour;</code></pre>
                    </div>
                </div>

                <div class="example-card">
                    <h3>繧ｫ繝・ざ繝ｪ蛻･螢ｲ荳雁・譫・/h3>
                    <div class="sql-example">
                        <pre><code>SELECT si.effect_type,
       COUNT(*) as purchase_count,
       SUM(pl.quantity) as total_quantity,
       SUM(pl.total_price) as total_revenue,
       AVG(pl.total_price) as avg_price
FROM purchase_logs pl
JOIN shop_items si ON pl.item_id = si.item_id
GROUP BY si.effect_type
ORDER BY total_revenue DESC;</code></pre>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <!-- JavaScript繝輔ぃ繧､繝ｫ -->
    <script src="../script.js"></script>
    <script src="table-script.js"></script>
</body>
</html>
